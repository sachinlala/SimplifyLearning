!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("minisearch",[],t):"object"==typeof exports?exports.minisearch=t():e.minisearch=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t._tree,i=Object.keys(r);this.set=t,this.type=n,this.path=i.length>0?[{node:r,keys:i}]:[]}var t,n,i;return t=e,(n=[{key:"next",value:function(){var e=this.dive();return this.backtrack(),e}},{key:"dive",value:function(){if(0===this.path.length)return{done:!0};var e=s(this.path),t=e.node,n=e.keys;return s(n)===c?{done:!1,value:this.result()}:(this.path.push({node:t[s(n)],keys:Object.keys(t[s(n)])}),this.dive())}},{key:"backtrack",value:function(){0!==this.path.length&&(s(this.path).keys.pop(),s(this.path).keys.length>0||(this.path.pop(),this.backtrack()))}},{key:"key",value:function(){return this.set._prefix+this.path.map(function(e){var t=e.keys;return s(t)}).filter(function(e){return e!==c}).join("")}},{key:"value",value:function(){return s(this.path).node[c]}},{key:"result",value:function(){return this.type===a?this.value():this.type===u?this.key():[this.key(),this.value()]}},{key:Symbol.iterator,value:function(){return this}}])&&r(t.prototype,n),i&&r(t,i),e}(),o="ENTRIES",u="KEYS",a="VALUES",c="",s=function(e){return e[e.length-1]};function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=function(e,t,n){for(var r=[{distance:0,ia:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,ib:0,edit:arguments.length>4&&void 0!==arguments[4]?arguments[4]:d}],i=[],o=[];r.length>0;){var u=r.pop(),a=u.distance,c=u.ia,s=u.ib,f=u.edit;if(i[c]=i[c]||[],!(i[c][s]&&i[c][s]<=a))if(i[c][s]=a,s!==t.length)if(e[c]===t[s])r.push({distance:a,ia:c+1,ib:s+1,edit:d});else{if(a>=n)continue;f!==v&&r.push({distance:a+1,ia:c,ib:s+1,edit:y}),c<e.length&&(f!==y&&r.push({distance:a+1,ia:c+1,ib:s,edit:v}),f!==y&&f!==v&&r.push({distance:a+1,ia:c+1,ib:s+1,edit:h}))}else o.push({distance:a,i:c,edit:f})}return o},d=0,h=1,v=2,y=3,p=function(e,t,n){for(var r=[{distance:0,i:0,key:"",node:e}],i={},o=function(){var e=r.pop(),o=e.node,u=e.distance,a=e.key,s=e.i,d=e.edit;Object.keys(o).forEach(function(e){if(e===c){var h=u+(t.length-s),v=f(i[a]||[null,1/0],2)[1];h<=n&&h<v&&(i[a]=[o[e],h])}else l(t,e,n-u,s,d).forEach(function(t){var n=t.distance,i=t.i,c=t.edit;r.push({node:o[e],distance:u+n,key:a+e,i:i,edit:c})})})};r.length>0;)o();return i};function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tree=t,this._prefix=n}var t,n,r;return t=e,(n=[{key:"atPrefix",value:function(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var n=b(x(this._tree,t.slice(this._prefix.length)),2),r=n[0],i=n[1];if(void 0===r){var o=b(L(i),2),u=o[0],a=o[1],s=Object.keys(u).find(function(e){return e!==c&&e.startsWith(a)});if(void 0!==s)return new e(m({},s.slice(a.length),u[s]),t)}return new e(r||{},t)}},{key:"clear",value:function(){delete this._size,this._tree={}}},{key:"delete",value:function(e){return delete this._size,I(this._tree,e)}},{key:"entries",value:function(){return new i(this,o)}},{key:"forEach",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=b(i.value,2);e(u[0],u[1],this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"fuzzyGet",value:function(e,t){return p(this._tree,e,t)}},{key:"get",value:function(e){var t=O(this._tree,e);return void 0!==t?t[c]:void 0}},{key:"has",value:function(e){var t=O(this._tree,e);return void 0!==t&&t.hasOwnProperty(c)}},{key:"keys",value:function(){return new i(this,u)}},{key:"set",value:function(e,t){if("string"!=typeof e)throw new Error("key must be a string");return delete this._size,j(this._tree,e)[c]=t,this}},{key:"update",value:function(e,t){if("string"!=typeof e)throw new Error("key must be a string");delete this._size;var n=j(this._tree,e);return n[c]=t(n[c]),this}},{key:"values",value:function(){return new i(this,a)}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"size",get:function(){var e=this;return this._size?this._size:(this._size=0,this.forEach(function(){e._size+=1}),this._size)}}])&&_(t.prototype,n),r&&_(t,r),e}();k.from=function(e){var t=new k,n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=b(o.value,2),c=a[0],s=a[1];t.set(c,s)}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t},k.fromObject=function(e){return k.from(Object.entries(e))};var w,x=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===n.length)return[t,r];var i=Object.keys(t).find(function(e){return e!==c&&n.startsWith(e)});return void 0===i?e(void 0,"",[].concat(g(r),[[t,n]])):e(t[i],n.slice(i.length),[].concat(g(r),[[t,i]]))},O=function e(t,n){if(0===n.length)return t;var r=Object.keys(t).find(function(e){return e!==c&&n.startsWith(e)});return void 0!==r?e(t[r],n.slice(r.length)):void 0},j=function e(t,n){if(0===n.length)return t;var r=Object.keys(t).find(function(e){return e!==c&&n.startsWith(e)});if(void 0===r){var i=Object.keys(t).find(function(e){return e!==c&&e.startsWith(n[0])});if(void 0!==i){var o=z(n,i);return t[o]=m({},i.slice(o.length),t[i]),delete t[i],e(t[o],n.slice(o.length))}return t[n]={},t[n]}return e(t[r],n.slice(r.length))},z=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.min(t.length,n.length),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return r>=i?o:t[r]!==n[r]?o:e(t,n,r+1,i,o+t[r])},I=function(e,t){var n=b(x(e,t),2),r=n[0],i=n[1];if(void 0!==r){delete r[c];var o=Object.keys(r);0===o.length&&E(i),1===o.length&&S(i,o[0],r[o[0]])}},E=function e(t){if(0!==t.length){var n=b(L(t),2),r=n[0];delete r[n[1]],0===Object.keys(r).length&&e(t.slice(0,-1))}},S=function(e,t,n){if(0!==e.length){var r=b(L(e),2),i=r[0],o=r[1];i[o+t]=n,delete i[o]}},L=function(e){return e[e.length-1]},A=k;function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){F(e,t,n[t])})}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=P({},B,t),this._options.searchOptions=P({},H,this._options.searchOptions||{});var n=this._options.fields;if(null==n)throw new Error('Option "fields" must be provided');this._index=new A,this._documentCount=0,this._documentIds={},this._fieldIds={},this._fieldLength={},this._averageFieldLength={},this._nextId=0,G(this,n)}var t,n,r;return t=e,(n=[{key:"add",value:function(e){var t=this,n=this._options,r=n.tokenize,i=n.processTerm,o=n.fields,u=n.idField;if(null==e[u])throw new Error('Document does not have ID field "'.concat(u,'"'));var a=R(this,e[u]);o.forEach(function(n){var o=r(e[n]||"",n);K(t,a,t._fieldIds[n],t.documentCount-1,o.length),o.forEach(function(e){var r=i(e,n);q(r)&&W(t,t._fieldIds[n],a,r)})})}},{key:"addAll",value:function(e){var t=this;e.forEach(function(e){return t.add(e)})}},{key:"remove",value:function(e){var t=this,n=this._options,r=n.tokenize,i=n.processTerm,o=n.fields,u=n.idField;if(null==e[u])throw new Error('Document does not have ID field "'.concat(u,'"'));var a=Object.entries(this._documentIds).find(function(t){var n=T(t,2),r=(n[0],n[1]);return e[u]===r})||[],c=T(a,1)[0];if(null==c)throw new Error("Cannot remove document with ID ".concat(e[u],": it is not in the index"));o.filter(function(t){return null!=e[t]}).forEach(function(n){r(e[n]).forEach(function(e){var r=i(e);q(r)&&J(t,t._fieldIds[n],c,i(e))})}),delete this._documentIds[c],this._documentCount-=1}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._options,i=r.tokenize,o=r.processTerm,u=r.searchOptions,a=n=P({tokenize:i,processTerm:o},u,n),c=a.tokenize,s=a.processTerm,f=c(e).map(s).filter(q).map(Y(n)).map(function(e){return t.executeQuery(e,n)}),l=this.combineResults(f,n.combineWith);return Object.entries(l).map(function(e){var n=T(e,2),r=n[0],i=n[1],o=i.score,u=i.match,a=i.terms;return{id:t._documentIds[r],terms:Z(a),score:o,match:u}}).sort(function(e,t){return e.score<t.score?1:-1})}},{key:"autoSuggest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=P({},X,t);var n=this.search(e,t).reduce(function(e,t){var n=t.score,r=t.terms,i=r.join(" ");return null==e[i]?e[i]={score:n,terms:r,count:1}:(e[i].score+=n,e[i].count+=1),e},{});return Object.entries(n).map(function(e){var t=T(e,2),n=t[0],r=t[1],i=r.score;return{suggestion:n,terms:r.terms,score:i/r.count}}).sort(function(e,t){return e.score<t.score?1:-1})}},{key:"executeQuery",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=((n=P({},this._options.searchOptions,n)).fields||this._options.fields).reduce(function(e,t){return P({},e,F({},t,e[t]||1))},n.boost||{}),i=n,o=i.boostDocument,u=i.weights,a=u.fuzzy,c=void 0===a?.9:a,s=u.prefix,f=void 0===s?.75:s,l=Q(this,e.term,r,o,this._index.get(e.term));if(!e.fuzzy&&!e.prefix)return l;var d=[l];if(e.prefix&&this._index.atPrefix(e.term).forEach(function(n,i){var u=.3*(n.length-e.term.length)/n.length;d.push(Q(t,n,r,o,i,f,u))}),e.fuzzy){var h=e.fuzzy<1?Math.round(e.term.length*e.fuzzy):e.fuzzy;Object.entries(this._index.fuzzyGet(e.term,h)).forEach(function(e){var n=T(e,2),i=n[0],u=T(n[1],2),a=u[0],s=u[1]/i.length;d.push(Q(t,i,r,o,a,c,s))})}return d.reduce(U.or,{})}},{key:"combineResults",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"or";if(0===e.length)return{};var n=t.toLowerCase();return e.reduce(U[n],null)}},{key:"toJSON",value:function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength}}},{key:"documentCount",get:function(){return this._documentCount}}])&&M(t.prototype,n),r&&M(t,r),e}();D.loadJSON=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.loadJS(JSON.parse(e),t)},D.loadJS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.index,r=n._tree,i=n._prefix,o=e.documentCount,u=e.nextId,a=e.documentIds,c=e.fieldIds,s=e.fieldLength,f=e.averageFieldLength,l=new D(t);return l._index=new A(r,i),l._documentCount=o,l._nextId=u,l._documentIds=a,l._fieldIds=c,l._fieldLength=s,l._averageFieldLength=f,l._fieldIds=c,l},D.SearchableMap=A;var W=function(e,t,n,r){e._index.update(r,function(e){var r=(e=e||{})[t]||{df:0,ds:{}};return null==r.ds[n]&&(r.df+=1),r.ds[n]=(r.ds[n]||0)+1,P({},e,F({},t,r))})},J=function(e,t,n,r){e._index.has(r)?(e._index.update(r,function(i){var o=i[t];if(null==o||null==o.ds[n])return N(e,n,t,r),i;if(o.ds[n]<=1){if(o.df<=1)return delete i[t],i;o.df-=1}return o.ds[n]<=1?(delete o.ds[n],i):(o.ds[n]-=1,P({},i,F({},t,o)))}),0===Object.keys(e._index.get(r)).length&&e._index.delete(r)):N(e,n,t,r)},N=function(e,t,n,r){if(null!=console&&null!=console.warn){var i=Object.entries(e._fieldIds).find(function(e){var t=T(e,2);t[0];return t[1]===n})[0];console.warn("MiniSearch: document with ID ".concat(e._documentIds[t],' has changed before removal: term "').concat(r,'" was not present in field "').concat(i,'". Removing a document after it has changed can corrupt the index!'))}},R=function(e,t){var n=e._nextId.toString(36);return e._documentIds[n]=t,e._documentCount+=1,e._nextId+=1,n},G=function(e,t){t.forEach(function(t,n){e._fieldIds[t]=n})},Q=function(e,t,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return null==i?{}:Object.entries(n).reduce(function(n,u){var a=T(u,2),c=a[0],s=a[1],f=e._fieldIds[c],l=i[f]||{ds:{}},d=l.df,h=l.ds;return Object.entries(h).forEach(function(i){var u=T(i,2),a=u[0],l=u[1],h=r?r(e._documentIds[a],t):1;if(h){var v=e._fieldLength[a][f]/e._averageFieldLength[f];n[a]=n[a]||{score:0,match:{},terms:[]},n[a].terms.push(t),n[a].match[t]=n[a].match[t]||[],n[a].score+=h*V(l,d,e._documentCount,v,s,o),n[a].match[t].push(c)}}),n},{})},K=function(e,t,n,r,i){e._averageFieldLength[n]=e._averageFieldLength[n]||0;var o=e._averageFieldLength[n]*r+i;e._fieldLength[t]=e._fieldLength[t]||{},e._fieldLength[t][n]=i,e._averageFieldLength[n]=o/(r+1)},U=(F(w={},"or",function(e,t){return Object.entries(t).reduce(function(e,t){var n=T(t,2),r=n[0],i=n[1],o=i.score,u=i.match,a=i.terms;return null==e[r]?e[r]={score:o,match:u,terms:a}:(e[r].score+=o,e[r].score*=1.5,e[r].terms=[].concat(C(e[r].terms),C(a)),Object.assign(e[r].match,u)),e},e||{})}),F(w,"and",function(e,t){return null==e?t:Object.entries(t).reduce(function(t,n){var r=T(n,2),i=r[0],o=r[1],u=o.score,a=o.match,c=o.terms;return void 0===e[i]?t:(t[i]=t[i]||{},t[i].score=e[i].score+u,t[i].match=P({},e[i].match,a),t[i].terms=[].concat(C(e[i].terms),C(c)),t)},{})}),w),V=function(e,t,n,r,i,o){var u,a;return i/(1+.333*i*o)*(u=t,a=n,e*Math.log(a/u))/r},Y=function(e){return function(t,n,r){return{term:t,fuzzy:"function"==typeof e.fuzzy?e.fuzzy(t,n,r):e.fuzzy,prefix:"function"==typeof e.prefix?e.prefix(t,n,r):e.prefix}}},Z=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},q=function(e){return!!e},B={idField:"id",tokenize:function(e,t){return e.split(/[^a-zA-Z0-9\u00C0-\u017F]+/)},processTerm:function(e,t){return e.length>1&&e.toLowerCase()}},H={combineWith:"or",prefix:!1,fuzzy:!1,weights:{}},X={prefix:!0},$=D;t.default=$}]).default});